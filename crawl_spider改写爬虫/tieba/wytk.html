<!DOCTYPE html><html><head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes">
    <title>无影坦克2代</title>
    <!--
67ef0b7c574635c6f8a5d5e0caf24944
4cc52c6851db9ecdfb657ec705754e1b
2b8cf305d8e8fc2ca657eda60aa0b6ea
b7fcb8a5e29bcc2cd2f9213341a67901
-->
<style>@media print {#ghostery-tracker-tally {display:none !important}}</style></head>

<body>
    <style>
        img {
            max-width: 100%
        }

        #info2 {
            word-break: break-all
        }

        summary {
            font-size: 1.2rem
        }

        a {
            color: #1080a0
        }
    </style>
    <div style="padding:0 16px">
        <h1>无影坦克𝐈𝐈</h1>
        <details>
            <summary>制作坦克</summary>
            <span>选择表图</span><br><input type="file" id="ipt1" onchange="ipt1()" accept="image/*">
            <br>
            <span>选择里图</span><br><input type="file" id="ipt" onchange="ipt()" accept="image/*">
            <br>
            <span>添加备注</span><input id="beizhucheckbox" type="checkbox" checked="true">
            <br><input type="text" id="beizhu" style="width:150px" value="TK">
            <br>
            <span>表图压缩度 </span><select id="select" onchange="select()">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4" selected="true">4</option>
            </select>
            <br>
            <span id="info1">建议里图大小：小于2M</span>
            <br>
            <button onclick="a1()">合成图片</button>
            <br>
            <img id="img1">
            <br>
            <a href="" id="a1" style="display:none">保存图片</a>
        </details>

        <details>
            <summary>坦克现形</summary>
            <input type="file" id="ipt2" onchange="ipt2()" accept="image/*">
            <div id="info2a" style="display:none">
                <span id="info2"></span><span> </span><a href="" id="a2">保存图片</a>
            </div>
            <img src="" id="img2">
        </details>

        <details>
            <summary>使用须知</summary>
            <div>
                <span style="color:#ee6622"><span style="font-weight:bold">免责声明</span> 本页面仅供技术研究使用，使用者做出的行为及后果作者概不负责！</span><br>
                <br>说明<br>
                原理是lsb隐写，不是类似图种的东西，压缩软件打不开的<br>
                表图压缩度越高，合成的图片体积越小，但噪点越多<br>
                百度贴吧会自动压缩大图，所以里图大小建议不要过大。百度贴吧ios端似乎对所有图片都压缩，导致ios发不成功<br>
                发送时不要加水印，合成时需保存原图，解密时务必上传原图<br>
                建议不要在百度浏览器或贴吧自带浏览器内使用此程序<br>
                部分手机浏览器使用时可能会因为兼容性问题导致无法保存图片，建议换谷歌浏览器或者使用电脑<br>
                <br>
                下载此网页：<a id="bc" download="wytk.html">下载</a> <a href="https://github.com/wytk/wytk.github.io/archive/main.zip">下载2</a><br>
                下载之后是个html文件，(大概)可以用浏览器直接打开使用
            </div>
        </details>
    </div>


    <remove-web-limits-iqxin id="rwl-iqxin" class="rwl-exempt" style="position: fixed; top: 447px; left: 0px;"><qxinbutton type="qxinbutton" id="rwl-setbtn"> set </qxinbutton> <lalala style="cursor:move; font-size:12px;">限制解除</lalala> <input type="checkbox" name="" id="black_node"><style type="text/css">#rwl-iqxin{position:fixed;transform:translate(-95px,0);width:85px;height:25px;font-size:12px;font-weight: 500;font-family:Verdana, Arial, '宋体';color:#fff;background:#333;z-index:2147483647;margin: 0;opacity:0.05;transition:0.3s;overflow:hidden;user-select:none;text-align:center;white-space:nowrap;line-height:25px;padding:0 16px;border:1px solid #ccc;border-width:1px 1px 1px 0;border-bottom-right-radius:5px;box-sizing: content-box;}#rwl-iqxin input{margin: 0;padding: 0;vertical-align:middle;-webkit-appearance:checkbox;-moz-appearance:checkbox;position: static;clip: auto;opacity: 1;cursor: pointer;}#rwl-iqxin.rwl-active-iqxin{left: 0px;transform:translate(0,0);opacity: 0.9;height: 32px;line-height: 32px}#rwl-iqxin label{margin:0;padding:0;font-weight:500;}#rwl-iqxin #rwl-setbtn{margin: 0 4px 0 0;padding: 0 0 0 4px;border: none;border-radius: 2px;cursor: pointer;background: #fff;color: #000;} </style></remove-web-limits-iqxin><div id="ghostery-tracker-tally" class="ghostery-bottom ghostery-right ghostery-none ghostery-collapsed"><div id="ghostery-box"><div id="ghostery-count" style="background: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAeCAYAAAAy2w7YAAAAAXNSR0IArs4c6QAAAmdJREFUSA3Flj1rFFEUhh0VAjEfEhNQoiBmgyKIRZLKZqOghVhYpNAy4EIsFG20Eiv9E/4DISZFfkIEo4UgSWGMWKlgihQmhRDX592dMx7v3p3ZWVg88Ow93+fOnZ2dTQ4USL1eHyPlJlyH83AcJN9hA1ZgMUmSbdbywoABeA4/oUiU8wwGSk2i4BxsQFlZp+BsR8NInITtshNc/g/0Su4wEo7ApivqVv2oXn7YQW+gP4ZwN7v4XsJnCEU+xfaCwCT2o8DXNNnBEOxFLqGqDPzD4K9Wux5KY7OROvUaVPwfwXk7krzqk4jfdzn3gthrFzP1luX4o6ua063rTpeq58YkjIW28qqW7AedNKdbjzpd6rCzw1hoKzXr6QeNuiamXuEM+s1gvRHT05zLLmbqMVOyleQ1O9hgXcK+CA9h38WkPwDFlp3fq2+yAaYQbTfIF5bVs0H+6GymX79hiCL5SkJuXtGgEzRYgLWcSYrdBeW2lcNtI38Dd1AvgV4Tc2C/HJ/Q9auwAsvQmRTcoyftulD3NOfGZfcoqyf5bU6BQoswYQXoFXgFeZIdeeIKdRRZI/NHVr1ZJfambVrxzy3evI2jbgxiS33k7cKheH7X3n0q+xn2y751Uz0Yot1p4zNSbNA1GT2Sq+qbcGw6vk3o5P6opqzo5VjRFc1Cr4ZoU2c0Q4NqsnosNR3dDkP0nvkNH0DHeBqmoRt5R9EX0P+GC6CL2dF/gXmYgxEcDUHXBl5AWVFN45FRI/QRUO/5ZufIJ8FBeA8mqyg1GE+RLp+Jclv/jER6t7go7IMqnGoJpg7F0hw99P9f/gBf4Jq0CsaoiAAAAABJRU5ErkJggg==&quot;) center center no-repeat; color: transparent;">0</div><div id="ghostery-pb-icons-container"><span id="ghostery-breaking-tracker" class="ghostery-pb-tracker" title="导致网页崩溃的跟踪器" style="background: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE4cHgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQwICgzMzc2MikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPmJyZWFraW5ncGFnZTwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGRlZnM+PC9kZWZzPg0KICAgIDxnIGlkPSJQdXJwbGUtQm94IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQxNi4wMDAwMDAsIC00NTMuMDAwMDAwKSIgaWQ9ImJhbSEtYnJlYWtpbmctdGhlLXBhZ2UtY29weS0yIiBmaWxsPSIjRkNCQTMzIj4NCiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQxNi4wMDAwMDAsIDQ1My4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOSwwLjE5NTY1MjE3NCBDNC4xNDQzNjAyNSwwLjE5NTY1MjE3NCAwLjE5NTY1MjE3NCw0LjE0NDM2MDI1IDAuMTk1NjUyMTc0LDkgQzAuMTk1NjUyMTc0LDEzLjg1NTYzOTggNC4xNDQzNjAyNSwxNy44MDQzNDc4IDksMTcuODA0MzQ3OCBDMTMuODU1NjM5OCwxNy44MDQzNDc4IDE3LjgwNDM0NzgsMTMuODU1NjM5OCAxNy44MDQzNDc4LDkgQzE3LjgwNDM0NzgsNC4xNDQzNjAyNSAxMy44NTU2Mzk4LDAuMTk1NjUyMTc0IDksMC4xOTU2NTIxNzQgWiBNMTEuNDg1NTg5OSwxMy40MTA0NDQxIEwxMS4wNzcwNzk4LDEzLjAyMDY3NjggTDEyLjEwMDQ3MTEsMTIuMjE2OTU3OSBMMTEuMDQ2MjQ1MSwxMi4yMTY5NTc5IEwxMS4yMzQ0NzgxLDEwLjg3MDcwODcgTDkuODAzMTgxNDIsMTEuNzk1NzUxMiBMOS40MDMzMzczNCw5LjM0NTA5MzkyIEw4LjY5NDc0MjY5LDExLjA4NjU1MTkgTDcuMzI1NzIwMDksMTAuMTcwOTgxNSBMNy43NTI1Njk3NywxMS45Mjk1NyBMNi41NTQyNDY3MywxMi4zMTE0Nzc1IEw3Ljg4MjM1Nzg3LDEzLjQxMDQ0NDEgTDExLjQ4NTU4OTksMTMuNDEwNDQ0MSBaIE02LjcxNTY3NTcyLDEzLjQxMDQ0NDEgTDUuMDI4NjMxOTcsMTIuMDA2NzU3NiBMNi44Njg0Mzg3MywxMS40MzE5ODE4IEw2LjE2Mzg3NDc3LDguNDg4NTczMDkgTDguMzQ5MzEyODgsOS45NTk5NzUxMiBMOS43MDQwMjY1NCw2LjYxMjQ5MDE1IEwxMC4zNTAzNDcxLDEwLjU1NjcxODIgTDEyLjE5NDk5MDcsOS4zNzY1MzMyOCBMMTEuODk4OTM2OCwxMS40NzY5MjM5IEwxNC4yNjI5MzQzLDExLjQ3NjkyMzkgTDEyLjIxMjkyNzIsMTMuMDc4OTIwMiBMMTIuNTY3MjI0NSwxMy40MTA0NDQxIEwxNS4zMzEyNjc3LDEzLjQxMDQ0NDEgTDE0LjQ3Mzk0MDcsMTIuNTk4NjYzOSBMMTcuMjA3MzUwNiwxMC40NjY4MzM5IEwxMy4wNjA3ODIxLDEwLjQ2NjgzMzkgTDEzLjQ5NjI5NzcsNy4zNDg2OTUgTDExLjA5OTg1MzIsOC44Nzg5NDUwNSBMMTAuMTIxMjAyNiwyLjg5Mjc3MTMgTDcuODc3NzIyNTgsOC40MjU0OTI4NSBMNC41NzA1NDQ0Nyw2LjIwMzk4MDEgTDUuNjY1NDgwNDEsMTAuNzUwMzkyNyBMMi45NTEwMTQ3MiwxMS41OTgyNDc2IEw1LjEzNjQ1MjgzLDEzLjQxMDQ0NDEgTDYuNzE1Njc1NzIsMTMuNDEwNDQ0MSBaIiBpZD0iYnJlYWtpbmdwYWdlIj48L3BhdGg+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4=&quot;); opacity: 0.5;"></span><span id="ghostery-slow-tracker" class="ghostery-pb-tracker" title="降低加载速度的跟踪器" style="background: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxN3B4IiBoZWlnaHQ9IjE3cHgiIHZpZXdCb3g9IjAgMCAxNyAxNyIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQwICgzMzc2MikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPnNsb3d0cmFja2VyczwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGRlZnM+PC9kZWZzPg0KICAgIDxnIGlkPSJQdXJwbGUtQm94IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM5NS4wMDAwMDAsIC00NTQuMDAwMDAwKSIgaWQ9InNsb3d0cmFja2VycyIgZmlsbD0iI0ZDQkEzMyI+DQogICAgICAgICAgICA8cGF0aCBkPSJNNDAzLjUsNDU0IEMzOTguODEyMjEsNDU0IDM5NSw0NTcuODEyMjEgMzk1LDQ2Mi41IEMzOTUsNDY3LjE4Nzc5IDM5OC44MTIyMSw0NzEgNDAzLjUsNDcxIEM0MDguMTg3NzksNDcxIDQxMiw0NjcuMTg3NzkgNDEyLDQ2Mi41IEM0MTIsNDU3LjgxMjIxIDQwOC4xODc3OSw0NTQgNDAzLjUsNDU0IFogTTQwOS42MDk1ODQsNDY1LjE3ODY1NCBDNDA5LjUzMDI1OSw0NjUuMTU0MDkgNDA4LjY3NzI4Myw0NjQuNzQ2NDIgNDA3LjU2MTA5MSw0NjQuMzYyNjM3IEM0MDguNDg0Mzc4LDQ2My43NDU2MSA0MDkuMDk0NDE4LDQ2Mi42OTM2NDUgNDA5LjA5NDQxOCw0NjEuNTAxNzMzIEM0MDkuMDk0NDE4LDQ1OS42MDU1ODEgNDA3LjU1MTQwMSw0NTguMDYyMzM4IDQwNS42NTUyNDksNDU4LjA2MjMzOCBDNDAzLjc1OTA5Nyw0NTguMDYyMzM4IDQwMi4yMTU4NTQsNDU5LjYwNTU4MSA0MDIuMjE1ODU0LDQ2MS41MDE3MzMgQzQwMi4yMTU4NTQsNDYyLjA0OTM1IDQwMi4zNDUyMDgsNDYyLjU2Njc2OSA0MDIuNTczMjY5LDQ2My4wMjY0OTcgQzQwMi43ODgwMzQsNDYzLjA2ODYzOCA0MDMuMzQ0NDQsNDYzLjE3NTIzMiA0MDQuMjIzNzgyLDQ2My4zMjM5NjggQzQwNS4yMDQ1MzUsNDYzLjQ5MDI4MSA0MDUuODUyNDM2LDQ2My4zNTY0MTkgNDA2LjM5MTAzOSw0NjIuODc2NjM0IEM0MDYuNzI4MTcyLDQ2Mi41NzY0NTkgNDA2LjkyODA2NCw0NjIuMTYzNjA2IDQwNi45NTM1MjksNDYxLjcxMzc5NCBDNDA2Ljk4MDEyMSw0NjEuMjYzOTgxIDQwNi44Mjk1ODMsNDYwLjgyOTk0NCA0MDYuNTI5NDA4LDQ2MC40OTM3MTIgQzQwNi4wNDY5MTksNDU5Ljk1MjQwNSA0MDUuMjE1MTI3LDQ1OS45MDM5NTMgNDA0LjY3MjY5Myw0NjAuMzg1NTQxIEM0MDQuMjM5NTU3LDQ2MC43NzExMjYgNDA0LjE4NTAyMSw0NjEuNDQ0NDkyIDQwNC41NTIxMjcsNDYxLjg1NzM0NiBDNDA0Ljg0MDEzMyw0NjIuMTgwNTA3IDQwNS4zNjk5NDcsNDYyLjIxNzQ2NiA0MDUuNjg2Nzk5LDQ2MS45MzU3NyBDNDA1LjgwMzk4NCw0NjEuODMxODggNDA1Ljg3MzM5NCw0NjEuNjkyODM1IDQwNS44ODA2MDYsNDYxLjU0NDc3NiBDNDA1Ljg4NjY5LDQ2MS40MjQyMSA0MDUuODUwNjMzLDQ2MS4zMTA2MyA0MDUuNzgwOTk4LDQ2MS4yMzQwMDkgQzQwNS43MTg1NzQsNDYxLjE2NTUgNDA1LjYxOTE5Miw0NjEuMTI3NjQxIDQwNS41MTY4OCw0NjEuMTI4NTQyIEM0MDUuNDI5ODkyLDQ2MS4xMzEwMjEgNDA1LjMxNzIxNCw0NjEuMTY1NSA0MDUuMjQ0MTk4LDQ2MS4yMzc2MTUgQzQwNS4yMjYzOTUsNDYxLjI1NDI5MSA0MDUuMjA0NTM1LDQ2MS4yNjQ4ODMgNDA1LjE3OTc0Niw0NjEuMjY0ODgzIEM0MDUuMTI2MTExLDQ2MS4yNjQ4ODMgNDA1LjA4MzA2OCw0NjEuMjE2NDMxIDQwNS4wODMwNjgsNDYxLjE1NzYxMyBDNDA1LjA4MzA2OCw0NjEuMTIxMzMxIDQwNS4wOTc5NDEsNDYxLjA5NDk2NCA0MDUuMTE2NDIxLDQ2MS4wNjk0OTggQzQwNS4yMjYzOTUsNDYwLjkxODk2IDQwNS4zODE0NCw0NjAuODMxNzQ3IDQwNS41MzUzNTksNDYwLjgxODY3NiBDNDA1Ljc0NDAzOSw0NjAuODAxMDk5IDQwNS45MTMwNTcsNDYwLjg2MDgxOCA0MDYuMDQ2OTE5LDQ2MS4wMDc3NTEgQzQwNi4xNzk4NzksNDYxLjE1NDAwNyA0MDYuMjQ5Mjg5LDQ2MS4zNDg0OSA0MDYuMjM3MTIsNDYxLjU2MzI1NSBDNDA2LjIyMzgyNCw0NjEuODA2MTkgNDA2LjExMjk0OCw0NjIuMDMyNDQ4IDQwNS45MjM2NDksNDYyLjIwMDU2NCBDNDA1LjQ1NzE2LDQ2Mi42MTYxMjIgNDA0LjcwNzE3Myw0NjIuNTY2MDkzIDQwNC4yODU1Myw0NjIuMDkzMjk0IEM0MDMuNzg5NzQ1LDQ2MS41MzU5ODcgNDAzLjg1ODQ3OSw0NjAuNjMyMDgxIDQwNC40MzUxNjcsNDYwLjExNzgxNyBDNDA1LjEyMzQwNyw0NTkuNTA1Mjk3IDQwNi4xODI1ODQsNDU5LjU2NjgyIDQwNi43OTQyMDIsNDYwLjI1NTI4NCBDNDA3LjE1NzAyNiw0NjAuNjYyNzMgNDA3LjM0MDAxNiw0NjEuMTg4MjYyIDQwNy4zMDg0NjYsNDYxLjczMzE3NCBDNDA3LjI3NjY5MSw0NjIuMjc4OTg4IDQwNy4wMzQ2NTgsNDYyLjc3OTA1NSA0MDYuNjI2OTg3LDQ2My4xNDE2NTQgQzQwNi4xNjgzODYsNDYzLjU1MDIyNiA0MDUuNjMyMjYyLDQ2My43NDY1MTIgNDA0Ljk0NjUwMiw0NjMuNzQ2NTEyIEM0MDQuNzA1MzcsNDYzLjc0NjUxMiA0MDQuNDQ0ODU3LDQ2My43MjE3MjIgNDA0LjE2MzE2Miw0NjMuNjc0Mzk3IEM0MDMuMTkyMDk5LDQ2My41MDk2NjIgNDAyLjE1NTAwNyw0NjMuMzI0ODY5IDQwMi4wMTU5NjIsNDYzLjMwNTQ4OCBDNDAxLjMxNzEzMSw0NjMuMjEyMTkxIDQwMC43MzYxNjEsNDYyLjczNzU4OSA0MDAuNzE3NjgyLDQ2Mi4wMzk2NTkgTDQwMC44OTQ1ODcsNDU4Ljk4NzY1MyBDNDAwLjg5NDU4Nyw0NTguNzkxMzY3IDQwMC43MzUyNiw0NTguNjMxMTM4IDQwMC41MzgwNzIsNDU4LjYzMTEzOCBDNDAwLjM0MDg4NSw0NTguNjMxMTM4IDQwMC4xODE1NTgsNDU4Ljc5MDQ2NSA0MDAuMTgxNTU4LDQ1OC45ODc2NTMgQzQwMC4xODE1NTgsNDU4Ljk4NzY1MyA0MDAuMjg1NDQ3LDQ2MC44NDE0MzcgNDAwLjI5NzYxNyw0NjEuMDc1NTgzIEM0MDAuMzIwNjAzLDQ2MS41MjAyMTIgMzk5LjkxMTEzLDQ2MS44NzY3MjYgMzk5LjQ2MDQxNiw0NjEuODc2NzI2IEMzOTguOTk4NDM1LDQ2MS44NzY3MjYgMzk4LjU4NzE1OSw0NjEuNTAwODMxIDM5OC42MjM0NDEsNDYxLjAzOTUyNiBDMzk4LjY0MzQ5OCw0NjAuNzg0MTk3IDM5OC42NjQ2ODIsNDYwLjUyMDA3OSAzOTguNjg1ODY1LDQ2MC4yNzI4NjIgTDM5OC43NTk3ODIsNDU5LjAwOTUxMiBDMzk4Ljc1OTc4Miw0NTguODEzMjI2IDM5OC42MDA0NTUsNDU4LjY1Mjk5OCAzOTguNDAzMjY4LDQ1OC42NTI5OTggQzM5OC4yMDYwOCw0NTguNjUyOTk4IDM5OC4wNDY3NTMsNDU4LjgxMjMyNSAzOTguMDQ2NzUzLDQ1OS4wMDk1MTIgTDM5OC4yMjAyNzgsNDYxLjk5OTk5NyBMMzk4LjIyMDI3OCw0NjIuMDA1MTggQzM5OC4yMjAyNzgsNDY0LjA5NzYxNyAzOTkuNDE3MzczLDQ2NS44MDI4OTIgNDAxLjUxMDcxMiw0NjUuODAxMDg5IEM0MDMuNjIyNTMxLDQ2NS43OTgzODUgNDA5LjYwODY4Myw0NjUuODAxMDg5IDQwOS42MDg2ODMsNDY1LjgwMTA4OSBDNDA5Ljc4MTA4MSw0NjUuODAxMDg5IDQwOS45MjAzNTEsNDY1LjY2MTE0MyA0MDkuOTIwMzUxLDQ2NS40ODk0MjEgQzQwOS45MjAzNTEsNDY1LjMxNzAyMyA0MDkuNzczMTkzLDQ2NS4yMzA3MTEgNDA5LjYwOTU4NCw0NjUuMTc4NjU0IFoiPjwvcGF0aD4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==&quot;); opacity: 0.5;"></span><span id="ghostery-non-secure-tracker" class="ghostery-pb-tracker" title="不安全的跟踪器" style="background: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE4cHgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQwICgzMzc2MikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPndhcm5pbmc8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPjwvZGVmcz4NCiAgICA8ZyBpZD0iUHVycGxlLUJveCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zNzMuMDAwMDAwLCAtNDUzLjAwMDAwMCkiIGlkPSJ3YXJuaW5nIiBmaWxsPSIjRkVCMDMyIj4NCiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM3My4wMDAwMDAsIDQ1My4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOSwwLjYzMDQzNDc4MyBDNC4zODQxNDQ5MywwLjYzMDQzNDc4MyAwLjYzMDQzNDc4Myw0LjM4NDE0NDkzIDAuNjMwNDM0NzgzLDkgQzAuNjMwNDM0NzgzLDEzLjYxNTg1NTEgNC4zODQxNDQ5MywxNy4zNjk1NjUyIDksMTcuMzY5NTY1MiBDMTMuNjE1ODU1MSwxNy4zNjk1NjUyIDE3LjM2OTU2NTIsMTMuNjE1ODU1MSAxNy4zNjk1NjUyLDkgQzE3LjM2OTU2NTIsNC4zODQxNDQ5MyAxMy42MTU4NTUxLDAuNjMwNDM0NzgzIDksMC42MzA0MzQ3ODMgWiBNNC42NDI5MjgxMSwxMS43ODk4NTUxIEM1LjI1MDQxMTY1LDExLjc4OTg1NTEgNS43NTY5NTIzNCwxMS4zNjA3NTY3IDUuODc4NzE2OTMsMTAuODgxMzY5NSBDNi4wMDA0ODE1MiwxMS4zNjEyNDM3IDYuNTA3MDIyMjIsMTEuNzIzNzM2OSA3LjExNDM4NCwxMS43MjM3MzY5IEM3LjcyNDE4MTA2LDExLjcyMzczNjkgOC4yMzI2Njk5OSwxMS4zNjUwMTg0IDguMzUxNTEyMjMsMTAuODgyNzA4OSBDOC40NzA5NjMzLDExLjM2NTAxODQgOC45Nzk0NTIyMywxMS43MzY1MjIyIDkuNTg4NzYyMjQsMTEuNzM2NTIyMiBDMTAuMTk0NjYyOCwxMS43MzY1MjIyIDEwLjcwMTIwMzUsMTEuMzk0OTcyNSAxMC44MjM0NTUyLDEwLjkxNjU1OTQgQzEwLjk0NTcwNjgsMTEuMzk0OTcyNSAxMS40NTIyNDc1LDExLjc4OTM2OCAxMi4wNTgyNjk5LDExLjc4OTM2OCBDMTIuMzUzNjcwOCwxMS43ODkzNjggMTIuNjI0NzE4OCwxMS42OTkzODQgMTIuODM5NzU1LDExLjU1OTU5ODIgQzExLjAwOTUxMTUsOC43MTgwOTk3NSAxMi4xNDUzMzE2LDQuMTM3NjgxMTYgMTIuMTQ1MzMxNiw0LjEzNzY4MTE2IEM2Ljk0NjQ3MDYzLDUuMjMxNjE0MjQgNC42NjU4MTk4NSwxMC4xMDAzNzE0IDQuMDU3OTcxMDEsMTEuNjY2MTQyMiBDNC4yMzI5NDY3MywxMS43NDMyMTkyIDQuNDMxNzg4MzEsMTEuNzg5ODU1MSA0LjY0MjkyODExLDExLjc4OTg1NTEgWiIgaWQ9Indhcm5pbmd0cmFja2VycyI+PC9wYXRoPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+&quot;); opacity: 0.5;"></span></div><div id="ghostery-title">外观</div><div id="ghostery-minimize"><span id="ghostery-minimize-icon"></span></div><span id="ghostery-close" style="background: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxNXB4IiBoZWlnaHQ9IjE1cHgiIHZpZXdCb3g9IjAgMCAxNSAxNSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuNy4yICgyODI3NikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPmNvbGxhcHNlIGNvcHkgMjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGRlZnM+PC9kZWZzPg0KICAgIDxnIGlkPSJQdXJwbGUtQm94IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9ImNvbGxhcHNlLWNvcHktMiI+DQogICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsLTMxNSIgZmlsbC1vcGFjaXR5PSIwLjI3MDE1Mzk4NiIgZmlsbD0iI0Q4RDhEOCIgY3g9IjcuNSIgY3k9IjcuNSIgcj0iNy41Ij48L2NpcmNsZT4NCiAgICAgICAgICAgIDxwYXRoIGQ9Ik00LjM2LDQuMzYgTDEwLjU3NDU2MzQsMTAuNTc0NTYzNCIgaWQ9IkxpbmUiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPg0KICAgICAgICAgICAgPHBhdGggZD0iTTQuMzYsNC4zNiBMMTAuNTc0NTYzNCwxMC41NzQ1NjM0IiBpZD0iTGluZS1Db3B5IiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDcuNjAwMDAwLCA3LjYwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtNy42MDAwMDAsIC03LjYwMDAwMCkgIj48L3BhdGg+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4=&quot;);"></span></div><div id="ghostery-pb-background"><div id="ghostery-trackerList"></div></div></div><script>
        function utf8Encode(string) {
            var utftext = "";
            for (var n = 0; n < string.length; n++) {
                var c = string.charCodeAt(n);
                if (c < 128) {
                    utftext += String.fromCharCode(c);
                } else if ((c > 127) && (c < 2048)) {
                    utftext += String.fromCharCode((c >> 6) | 192);
                    utftext += String.fromCharCode((c & 63) | 128);
                } else {
                    utftext += String.fromCharCode((c >> 12) | 224);
                    utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                    utftext += String.fromCharCode((c & 63) | 128);
                }
            }
            return utftext;
        }

        function utf8Decode(inputStr) {
            var outputStr = "";
            var code1, code2, code3, code4;
            for (var i = 0; i < inputStr.length; i++) {
                code1 = inputStr.charCodeAt(i);
                if (code1 < 128) {
                    outputStr += String.fromCharCode(code1);
                } else if (code1 < 224) {
                    code2 = inputStr.charCodeAt(++i);
                    outputStr += String.fromCharCode(((code1 & 31) << 6) | (code2 & 63));
                } else if (code1 < 240) {
                    code2 = inputStr.charCodeAt(++i);
                    code3 = inputStr.charCodeAt(++i);
                    outputStr += String.fromCharCode(((code1 & 15) << 12) | ((code2 & 63) << 6) | (code3 & 63));
                } else {
                    code2 = inputStr.charCodeAt(++i);
                    code3 = inputStr.charCodeAt(++i);
                    code4 = inputStr.charCodeAt(++i);
                    outputStr += String.fromCharCode(((code1 & 7) << 18) | ((code2 & 63) << 12) | ((code3 & 63) << 6) | (code2 & 63));
                }
            }
            return outputStr;
        }
    </script>
    <script>
        let IMG1 = new Image();
        let IMGINFO = [];
        let IMG2 = new Image();
        let MODE = 4;
        let SRC1 = "";
        let SRC2 = "";
        function a1() {
            requestAnimationFrame(function () {
                requestAnimationFrame(function () {
                    try {
                        let f = gen(MODE);
                        if (SRC1) { URL.revokeObjectURL(SRC1) }
                        SRC1 = URL.createObjectURL(f);
                        document.getElementById("a1").href = SRC1;
                        document.getElementById("img1").src = SRC1;
                        document.getElementById("a1").style.display = "inline";
                        document.getElementById("a1").download = "download.png"
                    } catch (e) { alert("图片生成失败") }
                })
            })
        }
        function a2() {
            try {
                let f = sol();
                if (SRC2) { URL.revokeObjectURL(SRC2) }
                SRC2 = URL.createObjectURL(f[0]);
                document.getElementById("a2").href = SRC2;
                document.getElementById("img2").src = SRC2;
                document.getElementById("info2a").style.display = "block";
                document.getElementById("a2").download = f[1];
                document.getElementById("info2").innerHTML = f[1]
            } catch (e) { alert("图片读取失败") }
        }
        function select() {
            let l = [0, "500K", "1M", "1.5M", "2M"]
            MODE = parseInt(document.getElementById("select").value);
            document.getElementById("info1").innerHTML = "建议里图大小：小于" + l[MODE]
        }
        function ipt1() {
            var oFReader = new FileReader();
            var ofile = document.getElementById("ipt1").files[0];
            oFReader.readAsDataURL(ofile);
            oFReader.onloadend = function (oFRevent) {
                var osrc = oFRevent.target.result;
                IMG1.src = osrc;

            }
        }

        function ipt() {
            var oFReader = new FileReader();
            var ofile = document.getElementById("ipt").files[0];
            oFReader.readAsArrayBuffer(ofile);
            oFReader.onloadend = function (oFRevent) {
                try {
                    let l = new Uint8Array(oFRevent.target.result);
                    IMGINFO = [[l.length, utf8Encode(ofile.name), ofile.type], l];
                } catch (e) { }
            }
        }

        function ipt2() {
            var oFReader = new FileReader();
            var ofile = document.getElementById("ipt2").files[0];
            oFReader.readAsDataURL(ofile);
            oFReader.onloadend = function (oFRevent) {
                var osrc = oFRevent.target.result;
                IMG2.src = osrc;
                IMG2.onload = function () {
                    a2()
                }
            }
        }


        function dataURLtoBlob(dataurl) {
            var arr = dataurl.split(',');
            var _arr = arr[1];
            var mime = arr[0].match(/:(.*?);/)[1],
                bstr = atob(_arr),
                n = bstr.length,
                u8arr = new Uint8Array(n);
            while (n--) {
                u8arr[n] = bstr.charCodeAt(n);
            }
            return new Blob([u8arr.buffer], { type: mime });
        }

        function gen(mode) {
            let modelist = [0, 3, mode];
            let word = IMGINFO[0].join(String.fromCharCode(1)) + String.fromCharCode(0);
            let length = 2 + parseInt((word.length + IMGINFO[1].length) * 8 / (mode * 3))
            let ax = Math.sqrt(length / (IMG1.width * IMG1.height));
            let wid = Math.ceil(IMG1.width * ax);
            let hit = Math.ceil(IMG1.height * ax);
            let cv = document.createElement("canvas");
            let cvd = cv.getContext("2d");
            cv.width = wid;
            cv.height = hit;
            cvd.fillStyle = "#ffffff";
            cvd.fillRect(0, 0, wid, hit);
            cvd.drawImage(IMG1, 0, 0, wid, hit);

            if (document.getElementById("beizhucheckbox").checked) {
                let w = document.getElementById("beizhu").value;
                cvd.font = "16px Arial";
                cvd.textBaseline = "middle";
                cvd.fillStyle = "rgba(255,255,255,0.75)";
                cvd.fillRect(0, 0, cvd.measureText(w).width + 8, 28);
                cvd.fillStyle = "#000000";
                cvd.fillText(w, 4, 14, wid - 8);
            }

            return new File([dataURLtoBlob(en(mode, modelist, cvd.getImageData(0, 0, wid, hit), word, IMGINFO[1], " wytk.github.io"))], "download.png", { type: "image/png" })
        }
        function sol() {
            let cv = document.createElement("canvas");
            let cvd = cv.getContext("2d");
            cv.width = IMG2.width;
            cv.height = IMG2.height;
            cvd.drawImage(IMG2, 0, 0);
            let imgdata = cvd.getImageData(0, 0, IMG2.width, IMG2.height);
            if (imgdata.data[0] % 8 != 0 || imgdata.data[1] % 8 != 3 || imgdata.data[2] % 8 == 0 || imgdata.data[2] % 8 > 5) {
                throw "error"
            }
            let klist = de(imgdata.data[2] % 8, imgdata);
            let file = new File([klist[1].buffer], utf8Decode(klist[0][1]), { type: klist[0][2] })
            return [file, utf8Decode(klist[0][1])]
        }


        function closer(mode, m, n) {
            let a = m % mode
            if (255 - m <= mode / 2 || m < mode / 2) {
                return parseInt(m / mode) * mode + n
            } else if (n - a > mode / 2) {
                return parseInt(m / mode) * mode + n - mode
            } else if (a - n >= mode / 2) {
                return parseInt(m / mode) * mode + n + mode
            } else {
                return parseInt(m / mode) * mode + n
            }
        }


        function en(mode, fplist, imgdata, aword, blist, cword) {
            let aa = Math.ceil(8 / 3 / mode);
            let n = imgdata.width * imgdata.height;
            let j = 0;
            let k = "";
            let i = 1;
            let mlist = [1, 2, 4, 8, 16, 32, 64, 128];
            let cv = document.createElement("canvas");
            let cvd = cv.getContext("2d");
            cv.width = imgdata.width;
            cv.height = imgdata.height;
            imgdata.data[0] = closer(8, imgdata.data[0], fplist[0]);
            imgdata.data[1] = closer(8, imgdata.data[1], fplist[1]);
            imgdata.data[2] = closer(8, imgdata.data[2], fplist[2]);
            while (i < n && j < aword.length) {
                k = k + (aword.charCodeAt(j) + 256).toString(2).slice(1);
                for (let ii = 0; ii < aa; ii++) {
                    if (k.length >= mode * 3) {
                        imgdata.data[4 * i] = closer(mlist[mode], imgdata.data[4 * i], parseInt(k.slice(0, mode), 2));
                        imgdata.data[4 * i + 1] = closer(mlist[mode], imgdata.data[4 * i + 1], parseInt(k.slice(mode, mode * 2), 2));
                        imgdata.data[4 * i + 2] = closer(mlist[mode], imgdata.data[4 * i + 2], parseInt(k.slice(mode * 2, mode * 3), 2));
                        k = k.slice(mode * 3);
                        i++
                    }
                }
                j++
            }
            j = 0;
            while (i < n && j < blist.length) {
                k = k + (blist[j] + 256).toString(2).slice(1);
                for (let ii = 0; ii < aa; ii++) {
                    if (k.length >= mode * 3) {
                        imgdata.data[4 * i] = closer(mlist[mode], imgdata.data[4 * i], parseInt(k.slice(0, mode), 2));
                        imgdata.data[4 * i + 1] = closer(mlist[mode], imgdata.data[4 * i + 1], parseInt(k.slice(mode, mode * 2), 2));
                        imgdata.data[4 * i + 2] = closer(mlist[mode], imgdata.data[4 * i + 2], parseInt(k.slice(mode * 2, mode * 3), 2));
                        k = k.slice(mode * 3);
                        i++
                    }
                }
                j++
            }
            j = 0;
            while (i < n) {
                k = k + (cword.charCodeAt(j % cword.length) + 256).toString(2).slice(1);
                for (let ii = 0; ii < aa; ii++) {
                    if (k.length >= mode * 3) {
                        imgdata.data[4 * i] = closer(mlist[mode], imgdata.data[4 * i], parseInt(k.slice(0, mode), 2));
                        imgdata.data[4 * i + 1] = closer(mlist[mode], imgdata.data[4 * i + 1], parseInt(k.slice(mode, mode * 2), 2));
                        imgdata.data[4 * i + 2] = closer(mlist[mode], imgdata.data[4 * i + 2], parseInt(k.slice(mode * 2, mode * 3), 2));
                        k = k.slice(mode * 3);
                        i++
                    }
                }
                j++
            }
            cvd.putImageData(imgdata, 0, 0);
            return cv.toDataURL();
        }

        function de(mode, imgdata) {
            let aa = Math.ceil(3 * mode / 8);
            let n = imgdata.width * imgdata.height;
            let j = 0;
            let k = "";
            let i = 1;
            let mlist = [1, 2, 4, 8, 16, 32, 64, 128];
            let word = "";
            let blist//=new Uint8Array();
            let blength = 0;
            while (i < n && (word.length == 0 || word.slice(-1).charCodeAt(0) > 0)) {
                k = k + (imgdata.data[4 * i] + 256).toString(2).slice(-mode);
                k = k + (imgdata.data[4 * i + 1] + 256).toString(2).slice(-mode);
                k = k + (imgdata.data[4 * i + 2] + 256).toString(2).slice(-mode);
                i++
                for (let ii = 0; ii < aa; ii++) {
                    if (k.length >= 8 && (word.length == 0 || word.slice(-1).charCodeAt(0) > 0)) {
                        word = word + String.fromCharCode(parseInt(k.slice(0, 8), 2));
                        k = k.slice(8);
                    }
                }
            }
            //word分隔符:","
            blength = parseInt(word.split(String.fromCharCode(1))[0]);
            if (!(blength > -1)) {
                throw "error"
            }
            if (!(word.split(String.fromCharCode(1)).length > 2)) {
                throw "error"
            }
            blist = new Uint8Array(blength);
            if (k.length >= 8 && j < blength) {
                blist[j] = parseInt(k.slice(0, 8), 2);
                k = k.slice(8);
                j++
            }
            while (i < n && j < blength) {
                k = k + (imgdata.data[4 * i] + 256).toString(2).slice(-mode);
                k = k + (imgdata.data[4 * i + 1] + 256).toString(2).slice(-mode);
                k = k + (imgdata.data[4 * i + 2] + 256).toString(2).slice(-mode);
                i++
                for (let ii = 0; ii < aa; ii++) {
                    if (k.length >= 8 && j < blength) {
                        blist[j] = parseInt(k.slice(0, 8), 2);
                        k = k.slice(8);
                        j++
                    }
                }
            }
            return [word.split(String.fromCharCode(0))[0].split(String.fromCharCode(1)), blist]
        }
        window.onload = function () {
            let w = "<!DOCTYPE " + "html>" + document.documentElement.outerHTML;
            document.getElementById("bc").href = URL.createObjectURL(new Blob([w], { type: "text/html" }))
        }
    </script>


</body></html>